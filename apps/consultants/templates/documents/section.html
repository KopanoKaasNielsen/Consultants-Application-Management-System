{% load i18n %}
<section class="{{ section_class|default:'data-card' }}">
  <div class="{{ content_class|default:'' }}">
    <div class="card-header d-flex justify-content-between align-items-center mb-3">
      <h3 class="h5 mb-0">{{ title }}</h3>
      {% if can_upload %}
        <span class="text-muted small">{% trans "Allowed: PDF, DOCX, JPG, PNG" %}</span>
      {% endif %}
    </div>

    {% if can_upload and upload_form and upload_url %}
    <form method="post" action="{{ upload_url }}" enctype="multipart/form-data" class="document-upload-form mb-3">
      {% csrf_token %}
      {% if next_url %}
      <input type="hidden" name="next" value="{{ next_url }}">
      {% endif %}
      <div class="input-group">
        {{ upload_form.file }}
        <button type="submit" class="btn btn-primary">{% trans "Upload" %}</button>
      </div>
    </form>
    {% endif %}

    {% if documents %}
    <ul class="document-list list-unstyled mb-0">
      {% for document in documents %}
      <li class="document-list__item py-2 border-top">
        <div class="d-flex flex-column flex-lg-row justify-content-between align-items-lg-center gap-2">
          <div>
            <span class="fw-semibold">{{ document.name }}</span>
            <div class="text-muted small">
              {{ document.type }} · {{ document.size }}
              · {% trans "Uploaded" %} {{ document.uploaded_at|date:"M d, Y H:i" }}
              · {{ document.uploaded_by }}
            </div>
          </div>
          <div class="d-flex flex-wrap gap-2">
            {% if document.preview_url %}
            <a class="btn btn-outline-secondary btn-sm" href="{{ document.preview_url }}" target="_blank" rel="noopener">{% trans "Preview" %}</a>
            {% endif %}
            <a class="btn btn-outline-secondary btn-sm" href="{{ document.download_url }}">{% trans "Download" %}</a>
            {% if can_delete %}
            <form method="post" action="{{ document.delete_url }}" class="d-inline">
              {% csrf_token %}
              {% if next_url %}
              <input type="hidden" name="next" value="{{ next_url }}">
              {% endif %}
              <button type="submit" class="btn btn-outline-danger btn-sm">{% trans "Delete" %}</button>
            </form>
            {% endif %}
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
    {% else %}
    <p class="text-muted mb-0">{{ empty_message }}</p>
    {% endif %}
  </div>
</section>
