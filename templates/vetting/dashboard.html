{% extends "base.html" %}

{% block title %}Vetting Dashboard{% endblock %}

{% block content %}
<h1>Vetting Dashboard</h1>

<table class="table">
    <thead>
        <tr>
            <th>Name</th>
            <th>Status</th>
            <th class="text-end">Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for consultant in consultants %}
        <tr>
            <td>{{ consultant.full_name }}</td>
            <td>{{ consultant.get_status_display }}</td>
            <td class="text-end">
                {% if consultant.status == 'submitted' %}
                <form method="post" class="d-inline">
                    {% csrf_token %}
                    <input type="hidden" name="consultant_id" value="{{ consultant.id }}" />
                    {% for value, label in allowed_actions.items %}
                        <button
                            type="submit"
                            name="action"
                            value="{{ value }}"
                            class="btn btn-sm {% if value == 'rejected' %}btn-danger{% else %}btn-primary{% endif %}"
                        >
                            {{ label }}
                        </button>
                    {% endfor %}
                </form>
                {% else %}
                <span class="text-muted">No actions available</span>
                {% endif %}
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="3">No consultants found.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
