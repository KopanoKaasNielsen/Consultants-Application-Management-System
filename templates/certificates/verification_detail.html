{% extends "base.html" %}
{% block title %}Certificate Verification{% endblock %}
{% block content %}
<div class="certificate-verification">
    <h1 class="certificate-verification__title">Consultant Certificate Verification</h1>
    {% if verified %}
    <div class="certificate-verification__status certificate-verification__status--valid">
        ✅ {{ certificate_status_message }}
    </div>
    <dl class="certificate-verification__details">
        <div class="certificate-verification__row">
            <dt>Certificate ID</dt>
            <dd>{{ certificate_id }}</dd>
        </div>
        <div class="certificate-verification__row">
            <dt>Certificate status</dt>
            <dd>{{ certificate_status_display }} ({{ certificate_status }})</dd>
        </div>
        <div class="certificate-verification__row">
            <dt>Status updated</dt>
            <dd>{% if certificate_status_effective_at %}{{ certificate_status_effective_at|date:"j F Y H:i" }}{% else %}Not available{% endif %}</dd>
        </div>
        <div class="certificate-verification__row">
            <dt>Consultant</dt>
            <dd>{{ consultant.full_name }}</dd>
        </div>
        <div class="certificate-verification__row">
            <dt>Status</dt>
            <dd>{{ consultant.get_status_display }}</dd>
        </div>
        <div class="certificate-verification__row">
            <dt>Issued on</dt>
            <dd>{% if issued_on %}{{ issued_on|date:"j F Y" }}{% else %}Not available{% endif %}</dd>
        </div>
        <div class="certificate-verification__row">
            <dt>Valid until</dt>
            <dd>{% if expires_on %}{{ expires_on|date:"j F Y" }}{% else %}Not available{% endif %}</dd>
        </div>
        {% if consultant.registration_number %}
        <div class="certificate-verification__row">
            <dt>Registration number</dt>
            <dd>{{ consultant.registration_number }}</dd>
        </div>
        {% endif %}
        {% if certificate_status_reason %}
        <div class="certificate-verification__row">
            <dt>Status reason</dt>
            <dd>{{ certificate_status_reason }}</dd>
        </div>
        {% endif %}
    </dl>
    <p class="certificate-verification__hint">For additional assurance please confirm that the consultant details above match the printed certificate.</p>
    {% else %}
    <div class="certificate-verification__status certificate-verification__status--invalid">
        ❌ {% if certificate_status_message %}{{ certificate_status_message }}{% else %}Unable to verify certificate{% endif %}
    </div>
    <p class="certificate-verification__message">{{ verification_error|default:certificate_status_message|default:"Invalid Certificate" }}</p>
    <dl class="certificate-verification__details">
        <div class="certificate-verification__row">
            <dt>Certificate status</dt>
            <dd>{{ certificate_status_display }} ({{ certificate_status }})</dd>
        </div>
        <div class="certificate-verification__row">
            <dt>Status updated</dt>
            <dd>{% if certificate_status_effective_at %}{{ certificate_status_effective_at|date:"j F Y H:i" }}{% else %}Not available{% endif %}</dd>
        </div>
        {% if certificate_status_reason %}
        <div class="certificate-verification__row">
            <dt>Status reason</dt>
            <dd>{{ certificate_status_reason }}</dd>
        </div>
        {% endif %}
        <div class="certificate-verification__row">
            <dt>Consultant</dt>
            <dd>{{ consultant.full_name }}</dd>
        </div>
    </dl>
    {% endif %}
</div>
{% endblock %}
