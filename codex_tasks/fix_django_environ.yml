task_name: Fix Django Environ
actions:
  # 1Ô∏è‚É£ Ensure virtual environment is active
  - type: shell
    cmd: |
      source venv/bin/activate || echo "‚ö†Ô∏è Activate your virtualenv manually before rerun"

  # 2Ô∏è‚É£ Install django-environ in current venv
  - type: shell
    cmd: |
      echo "üì¶ Installing django-environ..."
      pip install django-environ

  # 3Ô∏è‚É£ Confirm installation worked
  - type: python
    script: |
      import environ
      print("‚úÖ django-environ is installed and importable")

  # 4Ô∏è‚É£ Test Django settings recognition of PostgreSQL database
  - type: shell
    cmd: |
      echo "üîç Checking Django database configuration..."
      export DJANGO_SETTINGS_MODULE=backend.settings.dev
      python -m django shell -c "from django.conf import settings; print(settings.DATABASES['default'])"
