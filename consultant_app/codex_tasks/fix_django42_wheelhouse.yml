name: "Fix requirements for Django 4.2 LTS, build and archive wheelhouse"
description: >
  CLI task compatible with Codex CLI on Oracle Linux/AIX mimic environments.

commands:
  - |
    set -e
    cd /opt/mlha/cams
    . venv/bin/activate
    sed -i 's/Django==.*/Django==4.2.16/' requirements.txt
    pip install --upgrade pip setuptools wheel
    mkdir -p /opt/mlha/wheelhouse
    pip wheel -r requirements.txt -w /opt/mlha/wheelhouse
    tar -czf /opt/mlha/wheelhouse_django42_$(date +%Y%m%d).tar.gz -C /opt/mlha wheelhouse
    echo "âœ… Wheelhouse built & archived."
